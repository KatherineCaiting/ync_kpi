<%@ page contentType="text/html;charset=UTF-8" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<c:set var="ctx" value="${pageContext.request.contextPath}"/>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>添加部门</title>
<style>
	td{
		text-align:center;
	}
</style>
</head>
<body>
	<form action="${ctx}/admin/department/edit" methon="post" id="queryForm">
		<input type="hidden" name="createTime" value="${department.createTime }" />
		<input type="hidden" name="id" value="${department.id }" />
		<table class="table table-striped table-bordered table-condensed">
			<tr>
				<td>部门名称：</td>
				<td><input type="text" name="name" value="${department.name }" /></td>
			</tr>
			<tr>
				<td>部门id：</td>
				<td>${department.id }</td>
			</tr>
			<tr>
				<td>部门人员：</td>
				<td>
					<c:forEach var="list" items="${department.es }">
						<c:if test="${list.isDel == 0}">
						${list.name }
						</c:if>
					</c:forEach>
				</td>
			</tr>
			<tr>
				<td>部门负责人：</td>
				<td><input type="text" name="mt" value="${department.mt }"/></td>
			</tr>
		</table>
		<div style="padding-left: 600px;">
			<br />
			<button class="btn">提交</button>
		</div>
	</form>
<script>
	$(function(){
		validate();
	})
	function validate() {
		$("#queryForm").validate({
			rules : {
				name : {
					required:true,
					remote: {
					    url: "${ctx}/admin/department/validateName",     //后台处理程序
					    type: "post",               //数据发送方式
					    dataType: "json",           //接受数据格式   
					    data: {                     //要传递的数据
					        name: function() {
					            return $("input[name='name']").val();
					        },
					        id : function() {
					        	return ${department.id }
					        }
					    }
					}
				},
				mt : {
					required:true
				}
			},
			messages : {
				name : {
					required:"必须输入部门名称",
					remote : "部门名称已存在"
				},
				mt : {
					required : "必须输入负责人名称"
				}
			}
		});
	}
</script>
</body>
</html>