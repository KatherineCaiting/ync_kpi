<%@ page contentType="text/html;charset=UTF-8" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<c:set var="ctx" value="${pageContext.request.contextPath}"/>
<html>
<head>
<script src="${ctx }/static/My97/WdatePicker.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>员工管理</title>
<style type="text/css">
#page{
	margin-left: 800px;
}
</style>
<script type="text/javascript">
	function pd(){
		var  pageIndex=document.getElementById("pageIndex").value;
		document.getElementById("pageIndex").value=eval(pageIndex)+1;
		form1.submit();
	}
	
	function pu(){
		var  pageIndex=document.getElementById("pageIndex").value;
		document.getElementById("pageIndex").value=eval(pageIndex)-1;
		form1.submit();
	}
</script>
</head>
<body>
	<form action="list" method="get" id="form1">
		<div id="search">
		<table >
			<tr>
				<td>姓名：<input type="text" name="name"></td>
				<td>是否为项目经理： <input type="radio" value="1" id="isPm" name="isPm">是&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					 				<input type="radio" value="0" id="isPm" name="isPm">否
			    </td>
			</tr>
			<tr>
				<td>工号：<input type="text" name="code"></td>
				<td>是否为MT负责人：<input type="radio" value="1" id="isMt" name="isMt">是&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					 				<input type="radio" value="0" id="isMt" name="isMt">否
				</td>
			</tr>
			<tr>
				<td>部门：<input type="text" name="departmentName"></td>
				<td>入职时间:<input class="Wdate" id="first" type="text" onfocus="new WdatePicker({lang:'zh-cn',dateFmt:'yyyy-MM-dd'})" name="createStartTime"/>~
							<input class="Wdate" id="last" type="text" onfocus="new WdatePicker({lang:'zh-cn',dateFmt:'yyyy-MM-dd'})" name="createEndTime"/></td>
			</tr>
			<tr>
				<td>职位：<input type=text name="position"></input>
				</td>
			</tr>
			<tr>
				<td>
					<button id="submit_btn" class="btn btn-primary" type="submit" >查询</button>
					<button type="button"  class="btn_add" onclick="location.href='addPage';">导入员工</button>
				</td>
			</tr>
		</table>
	</div>
	<div id=data>
	<table class="table table-striped table-bordered table-condensed">
		<tr>
			<td>序号</td>
			<td>工号</td>
			<td>姓名</td>
			<td>部门</td>
			<td>职位</td>
			<td>是否为MT负责人</td>
			<td>是否为项目经理</td>
			<td>入职时间</td>
			<td>操作</td>
		</tr>
		
	<c:forEach items="${employes.content}" var="employe"  varStatus="status">
	   <tr>
			<td>${status.index+1 }</td>
			<td>${employe.code }</td>
			<td>${employe.name }</td>
			<td>${employe.departmentName }</td>
			<td>${employe.position }</td>
			<td>
				<c:choose>
	                      <c:when test="${employe.isMt==true }">是</c:when>
	                      <c:otherwise>否</c:otherwise>
	            </c:choose>
			</td>
			<td>
				<c:choose>
	                      <c:when test="${employe.isPm==true }">是</c:when>
	                      <c:otherwise>否</c:otherwise>
	            </c:choose>
			</td>
			<td><fmt:formatDate value="${employe.employmentDate }" pattern="yyyy-MM-dd"/></td>
			<td>
				 <input type="button" value="查看" class="btn_view" onclick="location.href='view/${employe.id }';"/>
	             <input type="button" value="编辑" class="btn_modify" onclick="location.href='editPage/${employe.id }';" />
			</td>
		</tr>
	</c:forEach>
	</table> 
	</div>
	
	<div id="page">
		<input type="hidden" id="pageIndex" name="pageIndex" value="${page.pageIndex }">
		<a href="javascript:void(0)"  onclick="pu()">上一页</a>
		${page.pageIndex+1}
		<a href="javascript:void(0)"  onclick="pd()">下一页</a>
	</div>
	</form>
</body>
</html>